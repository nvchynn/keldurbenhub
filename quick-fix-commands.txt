# Быстрое исправление ошибки gio/glib-sys

# Выполните эти команды на сервере:

sudo apt update

# Основные библиотеки
sudo apt install -y libglib2.0-dev libgtk-3-dev librsvg2-dev

# Дополнительные GTK библиотеки для gio
sudo apt install -y libgdk-pixbuf2.0-dev libpango1.0-dev libcairo2-dev libgdk-pixbuf-2.0-dev

# Попробуйте разные версии WebKit:
sudo apt install -y libwebkit2gtk-4.1-dev || \
sudo apt install -y libwebkit2gtk-4.0-dev || \
sudo apt install -y libwebkit2gtk-4.0-37-dev || \
echo "WebKit не найден, продолжаем без него"

# Попробуйте разные версии AppIndicator:
sudo apt install -y libayatana-appindicator3-dev || \
sudo apt install -y libappindicator3-dev || \
echo "AppIndicator не найден, продолжаем без него"

# Очистите кэш и перекомпилируйте:
cd src-tauri
cargo clean
cargo build --bin server --release

# Обновите сервер:
sudo cp target/release/server /opt/keldurbenhub/
sudo chown www-data:www-data /opt/keldurbenhub/server
sudo systemctl restart keldurbenhub

