# KELDURBENHUB - Ð¡ÐµÑ€Ð²ÐµÑ€ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸

## ÐžÐ±Ð·Ð¾Ñ€

Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ñ‹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ñ…Ñ€Ð°Ð½ÑÑ‚ÑÑ Ð½Ð° VDS ÑÐµÑ€Ð²ÐµÑ€Ðµ Ð²Ð¼ÐµÑÑ‚Ð¾ localStorage. Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð²ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚:

- **Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… SQLite** Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
- **JWT Ñ‚Ð¾ÐºÐµÐ½Ñ‹** Ð´Ð»Ñ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸
- **REST API** Ð´Ð»Ñ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ Ð¸ Ð²Ñ…Ð¾Ð´Ð°
- **WebSocket ÑÐµÑ€Ð²ÐµÑ€** Ð´Ð»Ñ Ð¸Ð³Ñ€
- **Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾Ðµ Ñ…ÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ð°Ñ€Ð¾Ð»ÐµÐ¹** Ñ bcrypt

## Ð—Ð°Ð¿ÑƒÑÐº ÑÐµÑ€Ð²ÐµÑ€Ð°

### Windows
```bash
start-server.bat
```

### Linux/macOS
```bash
chmod +x start-server.sh
./start-server.sh
```

### Ð ÑƒÑ‡Ð½Ð¾Ð¹ Ð·Ð°Ð¿ÑƒÑÐº
```bash
cd src-tauri
export JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"
cargo run --bin server
```

## API Endpoints

### ÐÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ

#### POST /api/auth/register
Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ

**Ð—Ð°Ð¿Ñ€Ð¾Ñ:**
```json
{
  "username": "testuser",
  "password": "password123"
}
```

**ÐžÑ‚Ð²ÐµÑ‚:**
```json
{
  "user": {
    "id": "uuid",
    "username": "testuser",
    "avatar": "ðŸ¶"
  },
  "token": "jwt-token"
}
```

#### POST /api/auth/login
Ð’Ñ…Ð¾Ð´ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ

**Ð—Ð°Ð¿Ñ€Ð¾Ñ:**
```json
{
  "username": "testuser",
  "password": "password123"
}
```

**ÐžÑ‚Ð²ÐµÑ‚:**
```json
{
  "user": {
    "id": "uuid",
    "username": "testuser",
    "avatar": "ðŸ¶"
  },
  "token": "jwt-token"
}
```

#### GET /api/auth/me?token=jwt-token
ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¸ Ð¾ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ðµ

**ÐžÑ‚Ð²ÐµÑ‚:**
```json
{
  "id": "uuid",
  "username": "testuser",
  "avatar": "ðŸ¶"
}
```

### WebSocket

#### WebSocket /ws
Ð˜Ð³Ñ€Ð¾Ð²Ð¾Ð¹ ÑÐµÑ€Ð²ÐµÑ€ Ð´Ð»Ñ KELDURBENCOLORS

## Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…

Ð¡ÐµÑ€Ð²ÐµÑ€ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ SQLite Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ… `users.db` ÑÐ¾ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¾Ð¹:

```sql
CREATE TABLE users (
    id TEXT PRIMARY KEY,
    username TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    avatar TEXT,
    created_at TEXT NOT NULL
);
```

## Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ

- **ÐŸÐ°Ñ€Ð¾Ð»Ð¸ Ñ…ÐµÑˆÐ¸Ñ€ÑƒÑŽÑ‚ÑÑ** Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ bcrypt
- **JWT Ñ‚Ð¾ÐºÐµÐ½Ñ‹** Ð´Ð»Ñ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸ (Ð´ÐµÐ¹ÑÑ‚Ð²ÑƒÑŽÑ‚ 30 Ð´Ð½ÐµÐ¹)
- **Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð²Ñ…Ð¾Ð´Ð½Ñ‹Ñ… Ð´Ð°Ð½Ð½Ñ‹Ñ…** Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ
- **Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ SQL Ð¸Ð½ÑŠÐµÐºÑ†Ð¸Ð¹** Ñ‡ÐµÑ€ÐµÐ· sqlx

## ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ

### ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

- `JWT_SECRET` - ÑÐµÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ ÐºÐ»ÑŽÑ‡ Ð´Ð»Ñ JWT Ñ‚Ð¾ÐºÐµÐ½Ð¾Ð² (Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ: "your-secret-key")

### Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº

1. **JWT ÑÐµÐºÑ€ÐµÑ‚**: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½ÑƒÑŽ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ `JWT_SECRET` Ð¸Ð»Ð¸ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð² ÐºÐ¾Ð´Ðµ
2. **Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…**: Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ `database_url` Ð² `server.rs`
3. **ÐŸÐ¾Ñ€Ñ‚**: Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð°Ð´Ñ€ÐµÑ Ð² Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ `main()` (Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ: 8765)

## Ð Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð½Ð° VDS

1. **Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Rust** Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ
2. **Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚** Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€
3. **Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ**:
   ```bash
   export JWT_SECRET="your-production-secret-key"
   ```
4. **Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐµÑ€Ð²ÐµÑ€**:
   ```bash
   cargo run --bin server --release
   ```
5. **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ reverse proxy** (nginx/apache) Ð´Ð»Ñ HTTPS
6. **ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ API_BASE_URL** Ð²Ð¾ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ðµ Ð½Ð° Ð°Ð´Ñ€ÐµÑ Ð²Ð°ÑˆÐµÐ³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°

## ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³

Ð¡ÐµÑ€Ð²ÐµÑ€ Ð²Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ Ð»Ð¾Ð³Ð¸ Ñ‡ÐµÑ€ÐµÐ· tracing. Ð”Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ð° Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð² Ñ„Ð°Ð¹Ð»:

```bash
RUST_LOG=info cargo run --bin server > server.log 2>&1
```
